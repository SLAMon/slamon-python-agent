language: python
python:
- '3.3'
- '3.4'
- nightly
matrix:
  allow_failures:
  - python: nightly
cache:
  directory:
  - "$HOME/.cache/pip"
install:
- pip install -r test_requirements.txt
- pip install .
script:
- nosetests --with-coverage --cover-erase --cover-package=slamon_agent
notifications:
  webhooks:
    urls:
    - secure: feEKRGM5pwxP6FenUYuGRNgxXj4O5vQfSsm8x3Zmv//pau4CEnKJ10R58Knu4aHdNuRab5U9OZF7vtcdCOtxdUUWULmCj5XFgUOdcyXpgkdMN9zkcV54bTU2DdwRqXX19h1Uas+bTxVvJLQy+OWX9BaGXvCcHKXvhh5OmcRoLmoHcpizrnMkahAh7uaOuhqgSVV/vSRv/RLYACrIbyT40b/CXeHenraJhLZMXBYtgTkgXQaxIjXHEZp3bcuYM2ErQCoRxvT32RO+qBtWthAWhpzFATBLKIYUoyJmPUvfFuD5iGOdPEvSm7Xkwh2efLFNsRqwMJwPFg5+tCjFo/Ln2zgZ4PwNHA9BE9H4W7RderqSQlMz6N/uQDeXJJiFWB1IWZUVMuPBuM89sfALvPmlxD4jUbokJwgJBkGiX7CdNM7kZKzMytqAGBtemgwWGBSd3AY9YA/8mTR7mY18hWxAjfrAB8v7U9/BjvZycgXGO6kmAGn3gWJF7JTxwl/Awr/TrOPt/1zT0jyAc8x5YWLoiUhiA/PHcM4TmNm877jsCRROxUJgGvHlOFYKjKAYSay6Uj7CBS2OLaepclReRRXKokgdi6SZrwbBkwSAwzZ7aRoecZ0IZ2LGa0752dlHIK/ZaFd0eWlFYWBbL8n2GawlI7qp4bBzfs5T0gaSWgO8mYQ=
  "    on_success": change
  "    on_failure": always
  "    on_start": false
after_success:
- coveralls
deploy:
  provider: pypi
  user: slamon
  password:
    secure: CHeDQpHv2ureOmDTb85qj1nzx1rmDszqAgStpOYDvHmFC4cT9D5v7xaPohmeHQKYcFN5iJGDT3fX4loEimG3siwL789jD0KOAxXPuGDhXyM3Ho6wsc6ETv7/6Duq/mezDDoIpfczRrT7LH0gGHpf3Hz8kLtVPWPM8rZz23bnqAIsVNttWZVv5sHTPZuWhIUQzyRPoWqnd7T8b/rpwuQ1M6LhpdcnCZ6r687f2KgA09sjOWWmR6tkNVeBFflv7rLx3Y5tio0EyHu7f1ShmXIHp1LGis0luRRhEnkF9u8wsDQlh/MIROVNvJc7k8QNzEMt2SzduF712qb5JO/EVxc+ofCQIAddXSDUc3BgCX1/bc/YByCBksNPD09Y9sDLquXhbFvFaLyRkRZKHVEDmqiPJ8a9k5UrCtFT0wCknDSvANWZw13soVsGTGmV55YSmZraVqr1aVn4jklfPjIbt3xAYFX9iXd9z7bb1d+Fw6eUF+M/ag3A53mi0nRMv0FwGFJC2dtUQ2VG0ZSPfquvip6EOa2IpuYGgPvGVicTMGnN8k0Okkf7fIos4WuFT33Cb0VGtHAeU1P6KhlBT/KBLeH7kwytS6iRzTTPTDoTY87icN4hzmqx1GRw7Qve/UNhRDCGeQ8REtUTJXzwa2jUH1iWzLjAJtOTQbHXW8RXYNpm/Kg=
  on:
    tags: true
    branch: master
    repo: SLAMon/slamon-python-agent
